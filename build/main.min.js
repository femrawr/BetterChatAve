(()=>{"use strict";var e={56(e,n,t){e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},72(e){var n=[];function t(e){for(var t=-1,i=0;i<n.length;i++)if(n[i].identifier===e){t=i;break}return t}function i(e,i){for(var s={},a=[],r=0;r<e.length;r++){var c=e[r],d=i.base?c[0]+i.base:c[0],l=s[d]||0,u="".concat(d," ").concat(l);s[d]=l+1;var p=t(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(h);else{var g=o(h,i);i.byIndex=r,n.splice(r,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function o(e,n){var t=n.domAPI(n);t.update(e);return function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var s=i(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<s.length;a++){var r=t(s[a]);n[r].references--}for(var c=i(e,o),d=0;d<s.length;d++){var l=t(s[d]);0===n[l].references&&(n[l].updater(),n.splice(l,1))}s=c}}},105(e,n,t){t.d(n,{A:()=>r});var i=t(601),o=t.n(i),s=t(314),a=t.n(s)()(o());a.push([e.id,".gui-notif-ctnr {\n    position: fixed;\n    top: 20px;\n    right: 8px;\n    z-index: 1000000;\n    pointer-events: none;\n    max-width: 320px;\n}\n\n.gui-notif {\n    background: #1a1a1a;\n    border: 1px solid #333;\n    border-radius: 6px;\n    margin-bottom: 10px;\n    padding: 16px;\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);\n    transform: translateX(110%);\n    opacity: 0;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    pointer-events: auto;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    min-width: 280px;\n}\n\n.gui-notif.show {\n    transform: translateX(0);\n    opacity: 1;\n}\n\n.gui-notif.hide {\n    transform: translateX(110%);\n    opacity: 0;\n}\n\n.gui-notif-cont {\n    display: flex;\n    align-items: flex-start;\n    gap: 12px;\n    flex: 1;\n}\n\n.gui-notif-icon {\n    font-size: 18px;\n    line-height: 1;\n    margin-top: 1px;\n    flex-shrink: 0;\n}\n\n.gui-notif-text {\n    color: #ccc;\n    font-size: 14px;\n    line-height: 1.4;\n    word-wrap: break-word;\n}\n\n.gui-notif-close {\n    color: #888;\n    cursor: pointer;\n    font-size: 18px;\n    line-height: 1;\n    margin-left: 12px;\n    flex-shrink: 0;\n    transition: color 0.2s ease;\n}\n\n.gui-notif-close:hover {\n    color: #ccc;\n}\n\n.gui-notif-good {\n    border-left: 4px solid #4CAF50;\n}\n\n.gui-notif-good .gui-notif-icon {\n    color: #4CAF50;\n}\n\n.gui-notif-error {\n    border-left: 4px solid #f44336;\n}\n\n.gui-notif-error .gui-notif-icon {\n    color: #f44336;\n}\n\n.gui-notif-warn {\n    border-left: 4px solid #ff9800;\n}\n\n.gui-notif-warn .gui-notif-icon {\n    color: #ff9800;\n}\n\n.gui-notif-info {\n    border-left: 4px solid #2196F3;\n}\n\n.gui-notif-info .gui-notif-icon {\n    color: #2196F3;\n}",""]);const r=a},113(e){e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},181(e,n,t){t.d(n,{A:()=>r});var i=t(601),o=t.n(i),s=t(314),a=t.n(s)()(o());a.push([e.id,".gui-main-ctnr {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    width: 460px;\n    background: #0d0d0d;\n    border: 1px solid #333;\n    border-radius: 6px;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    z-index: 999999;\n    user-select: none;\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.9);\n}\n\n.gui-main-ctnr::-webkit-scrollbar {\n    display: none;\n}\n\n.gui-main-header {\n    background: #111;\n    color: #eee;\n    padding: 14px 18px;\n    cursor: default;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 17px;\n    font-weight: bold;\n    border-bottom: 1px solid #333;\n}\n\n.gui-main-close {\n    color: #ff4444;\n    cursor: pointer;\n    font-size: 22px;\n    font-weight: lighter;\n    width: 22px;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    line-height: 1;\n}\n\n.gui-main-close:hover {\n    color: #ff6666;\n}\n\n.gui-main-cont {\n    padding: 18px;\n    max-height: calc(80vh - 52px);\n    overflow-y: auto;\n}\n\n.gui-main-cont::-webkit-scrollbar {\n    display: none;\n}\n\n.gui-main-sect {\n    margin-bottom: 18px;\n    border: 1px solid #2a2a2a;\n    border-radius: 5px;\n    background: #161616;\n}\n\n.gui-sect-head {\n    background: #1a1a1a;\n    padding: 10px 14px;\n    border-bottom: 1px solid #2a2a2a;\n    color: #ccc;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.gui-sect-toggle {\n    color: #888;\n    font-size: 12px;\n    transition: transform 0.2s ease;\n}\n\n.gui-main-sect.collapsed .gui-sect-toggle {\n    transform: rotate(-90deg);\n}\n\n.gui-sect-cont {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n    padding: 12px;\n    transition: all 0.2s ease;\n}\n\n.gui-main-sect.collapsed .gui-sect-cont {\n    display: none;\n}\n\n.gui-item-main {\n    background: #1a1a1a;\n    border: 1px solid #2a2a2a;\n    border-radius: 4px;\n    padding: 12px;\n}\n\n.gui-item-label {\n    color: #ccc;\n    font-size: 14px;\n    margin-bottom: 8px;\n    font-weight: 600;\n}\n\n.gui-item-toggle {\n    position: relative;\n    width: 52px;\n    height: 26px;\n    background: #333;\n    border-radius: 13px;\n    cursor: pointer;\n    transition: background 0.2s ease;\n}\n\n.gui-item-toggle.active {\n    background: #ff4444;\n}\n\n.gui-item-toggle::after {\n    content: '';\n    position: absolute;\n    top: 3px;\n    left: 3px;\n    width: 20px;\n    height: 20px;\n    background: white;\n    border-radius: 50%;\n    transition: transform 0.2s ease;\n}\n\n.gui-item-toggle.active::after {\n    transform: translateX(26px);\n}\n\n.gui-item-button {\n    cursor: pointer;\n    text-align: center;\n    transition: all 0.2s ease;\n    background: #ff4444;\n    color: white;\n    font-weight: 600;\n}\n\n.gui-item-button:hover {\n    background: #ff6666;\n    transform: translateY(-1px);\n}\n\n.gui-item-button:active {\n    transform: translateY(0);\n}\n\n.gui-item-box, .gui-item-button {\n    width: 100%;\n    padding: 10px;\n    background: #222;\n    border: 1px solid #444;\n    border-radius: 4px;\n    color: #ccc;\n    font-size: 14px;\n    outline: none;\n    box-sizing: border-box;\n}\n\n.gui-item-box:focus {\n    border-color: #ff4444;\n}\n\n.gui-item-slider-ctnr {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n}\n\n.gui-item-slider-box {\n    width: 60px;\n    padding: 4px 6px;\n    background: #222;\n    border: 1px solid #444;\n    border-radius: 3px;\n    color: #ff4444;\n    font-size: 14px;\n    text-align: center;\n    outline: none;\n}\n\n.gui-item-slider-box:focus {\n    border-color: #ff4444;\n}\n\n.gui-item-slider {\n    flex: 1;\n    height: 6px;\n    background: #333;\n    border-radius: 3px;\n    outline: none;\n    appearance: none;\n}\n\n.gui-item-slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 18px;\n    height: 18px;\n    background: #ff4444;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.gui-item-slider::-moz-range-thumb {\n    width: 18px;\n    height: 18px;\n    background: #ff4444;\n    border-radius: 50%;\n    cursor: pointer;\n    border: none;\n}\n\n.gui-tip {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.85);\n    color: #fff;\n    padding: 6px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    pointer-events: none;\n    opacity: 0;\n    transform: translateY(-4px);\n    transition: opacity 0.15s ease, transform 0.15s ease;\n    z-index: 1000000;\n    max-width: 240px;\n    white-space: normal;\n}\n\n.gui-tip.show {\n    opacity: 1;\n    transform: translateY(-8px);\n}\n\ninput[type=number]::-webkit-inner-spin-button,\ninput[type=number]::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}",""]);const r=a},314(e){e.exports=function(e){var n=[];return n.toString=function(){return this.map(function(n){var t="",i=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),i&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),i&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t}).join("")},n.i=function(e,t,i,o,s){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var d=0;d<e.length;d++){var l=[].concat(e[d]);i&&a[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),n.push(l))}},n}},540(e){e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},601(e){e.exports=function(e){return e[1]}},659(e){var n={};e.exports=function(e,t){var i=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},825(e){e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,o&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),n.styleTagTransform(i,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}}},n={};function t(i){var o=n[i];if(void 0!==o)return o.exports;var s=n[i]={id:i,exports:{}};return e[i](s,s.exports,t),s.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var i in n)t.o(n,i)&&!t.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:n[i]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),t.nc=void 0;var i=t(72),o=t.n(i),s=t(825),a=t.n(s),r=t(659),c=t.n(r),d=t(56),l=t.n(d),u=t(540),p=t.n(u),h=t(113),g=t.n(h),f=t(181),m={};m.styleTagTransform=g(),m.setAttributes=l(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p();o()(f.A,m);f.A&&f.A.locals&&f.A.locals;const v={gui(e,n,t){const i=document.createElement(e);return t&&(i.textContent=t),n&&(Array.isArray(n)?i.className=n.map(e=>"gui-"+e).join(" "):i.className="gui-"+n),i},canRunBind:()=>""!==window.$("#message_content").val()?(window.$("#message_content").focus(),!1):!window.$("#set_user_about").is(":focus")||(window.$("#set_user_about").focus(),!1)},b={_container:null,_main:null,_active:null,onClose:null,init(e){this._container=v.gui("div","main-ctnr");const n=v.gui("div","main-header"),t=v.gui("span","main-title",e),i=v.gui("div","main-close","X");i.onclick=()=>this._close(),n.appendChild(t),n.appendChild(i),this._main=v.gui("div","main-cont"),this._container.appendChild(n),this._container.appendChild(this._main),window.bca.artifacts.push(this._container),document.body.appendChild(this._container),this._dragify(n),document.addEventListener("keydown",e=>{"Insert"===e.code&&this._toggle()})},_dragify(e){let n=!1,t={X:0,Y:0},i={X:0,Y:0},o={X:0,Y:0};e.addEventListener("mousedown",t=>{if(t.target!==e&&!t.target.closest(".gui-main-header"))return;const o=window.getComputedStyle(this._container).transform,s="none"===o?new DOMMatrix:new DOMMatrix(o);i.X=t.clientX-s.m41,i.Y=t.clientY-s.m42,n=!0}),document.addEventListener("mouseup",()=>{n=!1}),document.addEventListener("mousemove",e=>{n&&(e.preventDefault(),t.X=e.clientX-i.X,t.Y=e.clientY-i.Y,o.X=t.X,o.Y=t.Y,this._container.style.transform=`translate(${t.X}px, ${t.Y}px)`)})},_close(){this.onClose(),this._container.remove()},_toggle(){const e="none"===this._container.style.display;this._container.style.display=e?"":"none"},_tip(e,n){const t=v.gui("div","tip",n);window.bca.artifacts.push(t),document.body.appendChild(t),e.addEventListener("mouseenter",e=>{t.classList.add("show"),t.style.left=`${e.pageX+12}px`,t.style.top=e.pageY-8+"px"}),e.addEventListener("mousemove",e=>{t.style.left=`${e.pageX+12}px`,t.style.top=e.pageY-8+"px"}),e.addEventListener("mouseleave",()=>{t.classList.remove("show")})},addSection(e){const n=v.gui("div","main-sect"),t=v.gui("div","sect-head"),i=v.gui("span","sect-title",e),o=v.gui("span","sect-toggle","▼");t.addEventListener("click",()=>{n.classList.toggle("collapsed")}),t.appendChild(i),t.appendChild(o);const s=v.gui("div","sect-cont");return n.appendChild(t),n.appendChild(s),this._main.appendChild(n),this._active=s,{element:n,content:s,set:()=>(this._active=s,this)}},addLabel(e,n){const t=v.gui("div","item-main"),i=v.gui("div","item-label",n);t.appendChild(i);return(e?e.content:this._main).appendChild(t),t},addToggle(e,n,t,i){const o=v.gui("div","item-main"),s=v.gui("div","item-label",n),a=v.gui("div","item-toggle");t&&this._tip(o,t);let r=!1;a.addEventListener("click",()=>{r=!r,a.classList.toggle("active",r),i&&i(r)}),o.appendChild(s),o.appendChild(a);return(e?e.content:this._active).appendChild(o),{get:()=>r,set:e=>{r=e,a.classList.toggle("active",r)}}},addButton(e,n,t,i){const o=v.gui("div","item-main"),s=v.gui("button","item-button",n);t&&this._tip(o,t),s.addEventListener("click",()=>{i&&i()}),o.appendChild(s);return(e?e.content:this._active).appendChild(o),{name:e=>s.textContent=e,set:e=>s.disabled=!e}},addBox(e,n,t,i){const o=v.gui("div","item-main"),s=v.gui("div","item-label",n);t&&this._tip(o,t);const a=v.gui("input","item-box");a.type="text",a.addEventListener("keydown",e=>{"Enter"===e.key&&a.blur()}),i&&a.addEventListener("input",e=>i(e.target.value)),o.appendChild(s),o.appendChild(a);return(e?e.content:this._active).appendChild(o),{get:()=>a.value,set:e=>a.value=e}},addSlider(e,n,t,i,o,s,a){const r=v.gui("div","item-main"),c=v.gui("div","item-slider-ctnr");t&&this._tip(r,t);const d=v.gui("div","item-label",n);d.style.marginBottom="0";const l=v.gui("input","item-slider-box");l.type="number",l.value=s,l.addEventListener("keydown",e=>{"Enter"===e.key&&l.blur()}),c.appendChild(d),c.appendChild(l);const u=v.gui("input","item-slider");u.type="range",u.min=i,u.max=o,u.value=s;const p=e=>{u.value=e,l.value=e,a&&a(Number(e))};u.addEventListener("input",e=>p(e.target.value)),l.addEventListener("input",e=>p(e.target.value)),r.appendChild(c),r.appendChild(u);return(e?e.content:this._active).appendChild(r),{get:()=>Number(u.value),set:e=>p(e)}}},x={_hooked:{},xhrFuncs:[],notifs(e){if(e)return this._hooked.callSuccess=window.callSuccess,void(window.callSuccess=()=>{});this._hooked.callSuccess&&(window.callSuccess=this._hooked.callSuccess,delete this._hooked.callSuccess)},closeRight(){let e=window.closeRight;window.closeRight=()=>{window.prepareRight(0),window.userReload(1),window.closeRight=e,e=null}},request(e){if(e){const e=this;return this._hooked.xhrOpen=XMLHttpRequest.prototype.open,this._hooked.xhrSend=XMLHttpRequest.prototype.send,XMLHttpRequest.prototype.open=function(...n){return this._main=n[1].includes("chat_process.php"),this._priv=n[1].includes("private_process.php"),this._hook=this._main||this._priv,e._hooked.xhrOpen.apply(this,n)},void(XMLHttpRequest.prototype.send=function(...n){if(!this._hook)return e._hooked.xhrSend.apply(this,n);for(const t of e.xhrFuncs)t.call(this,n);return e._hooked.xhrSend.apply(this,n)})}XMLHttpRequest.prototype.open=this._hooked.xhrOpen,delete this._hooked.xhrOpen,XMLHttpRequest.prototype.send=this._hooked.xhrSend,delete this._hooked.xhrSend,this.xhrFuncs=[]}},w={save:{},get(){const e=localStorage.getItem("bca");return JSON.parse(e)||null},set(){localStorage.setItem("bca",JSON.stringify(this.save))},update(e,n){const t=this.get()||{};t[e]=n,this.save=t,this.set()}};class y{constructor(e={}){const{name:n="Name",sect:t=null,state:i=!1,type:o="",bind:s="",tip:a="",config:r={}}=e;this.name=n,this.sect=t,this.state=i,this.type=o,this.bind=s,this.tip=a,this.config=r,this.ui=null}onInit(){}onEnable(){}onDisable(){}onActive(){}onChange(){}enable(){this.state=!0,this.onEnable()}disable(){this.state=!1,this.onDisable()}toggle(e){void 0===e&&(e=!this.state),e?this.enable():this.disable()}setValue(e){this.ui?.set?.(e)}getValue(){return this.ui?.get?.()??null}}var _=t(105),k={};k.styleTagTransform=g(),k.setAttributes=l(),k.insert=c().bind(null,"head"),k.domAPI=a(),k.insertStyleElement=p();o()(_.A,k);_.A&&_.A.locals&&_.A.locals;const C={_container:{},_count:0,_active:new Map,enabled:!0,init(){this._container=v.gui("div","notif-ctnr"),window.bca.artifacts.push(this._container),document.body.appendChild(this._container)},_show(e,n,t){if(!this.enabled)return;const i=v.gui("div",["notif","notif-"+t]),o=v.gui("div","notif-cont"),s=this._icon(t),a=v.gui("div","notif-icon",s),r=v.gui("div","notif-text",e),c=v.gui("div","notif-close","X");c.onclick=()=>this._hide(d),o.appendChild(a),o.appendChild(r),i.appendChild(o),i.appendChild(c);const d=this._count+=1;return this._container.appendChild(i),this._active.set(d,i),setTimeout(()=>i.classList.add("show"),10),setTimeout(()=>this._hide(d),1e3*n),d},_hide(e){const n=this._active.get(e);n&&(n.classList.add("hide"),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),this._active.delete(e)},300))},_icon(e){const n={good:"✓",error:"✕",warn:"⚠",info:"ⓘ"};return n[e]||n.info},clear(){this._active.forEach((e,n)=>this._hide(n))},info(e,n){return this._show(e,n,"info")},warn(e,n){return this._show(e,n,"warn")},error(e,n){return this._show(e,n,"error")},good(e,n){return this._show(e,n,"good")}};class S extends y{constructor(){super({name:"Clear DMs",sect:"Convenience",type:"Button",tip:"Clears all your DMs."})}onActive(){window.privateClear(),C.good("DMs cleared",3)}}class E extends y{constructor(){super({name:"Fast Block",sect:"Convenience",type:"Button",bind:"B",tip:"Quickly blocks the person you are talking to."})}onActive(){if(!v.canRunBind())return;if(0===window.currentPrivate)return;window.ignoreThisUser();const e=window.$("#private_close")[0];e&&(e.click(),C.good("User has been blocked.",3))}}class L extends y{constructor(){super({name:"Swap DMs",sect:"Convenience",type:"Button",bind:"L",tip:"Quickly switch to the next person in your DMs."})}onActive(){v.canRunBind()&&(window.hideMenu("private_menu"),window.$.post("system/float/private_notify.php",{},e=>{window.appendMenu("private_menu",e);const n=window.$(".priv_mess")[0];if(!n)return;const t=n.querySelector(".fmenu_name.gprivate");t&&(t.click(),window.$("#message_content").focus())}),C.info("Swapping DMs...",3))}}class A extends y{constructor(){super({name:"Blur Background",sect:"Interface",state:!0,type:"Toggle",tip:"Blurs the background when you open someones profile."})}onEnable(){window.$("#large_modal").css("backdrop-filter","blur(8px)")}onDisable(){window.$("#large_modal").css("backdrop-filter","blur(0px)")}}class M extends y{constructor(){super({name:"Background Opacity",sect:"Interface",state:!0,type:"Slider",tip:"How opaque the background of the profile menu will be.",config:{min:0,max:100,value:50}})}onChange(e){window.$("#large_modal").css("background-color",`rgb(0, 0, 0, ${e/100})`)}}class T extends y{constructor(){super({name:"Country Search",sect:"Miscellaneous",type:"Button",tip:"Search for people based on thier country code."})}onActive(){const e=prompt('Country code to search, example: "sg" for Singapore.');e&&(window.prepareRight(0),window.$.post("system/panel/user_list.php",{},function(n){window.$("#chat_right_data").html(n),window.firstPanel="",document.querySelectorAll("#chat_right_data .user_item").forEach(n=>{n.getAttribute("data-country")!==e.toUpperCase()&&n.remove()}),x.closeRight()}))}}class $ extends y{constructor(){super({name:"Disable Success",sect:"Miscellaneous",state:!0,type:"Toggle",tip:"Disables the success banner that appears at the top of your screen."})}onEnable(){x.notifs(!0)}onDisable(){x.notifs(!1)}}class B extends y{constructor(){super({name:"Filter Bypass",sect:"Miscellaneous",state:!0,type:"Toggle",tip:"Bypasses the chat filter."})}onInit(){const e=this;x.xhrFuncs.push(function(n){const t=n[0];if(!this._hook||"string"!=typeof t||!e.state)return;const i=new URLSearchParams(t);if(i.has("content")){const e=i.get("content").split(" ").map(e=>e.length<=2?e:e.split("").join("‍")).join(" ");i.set("content",e),n[0]=i.toString()}})}}const X=JSON.parse('["d iscord","telegm","cp","telegram","telgram","tleg","s e s s i o n","telegrm"]');class D extends y{constructor(){super({name:"Spam Filter",sect:"Miscellaneous",state:!0,type:"Toggle",tip:"Attempts to filter out messages from spam bots."})}onEnable(){this.watcher=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e instanceof HTMLElement&&e.querySelectorAll(".chat_message").forEach(e=>{const n=e.innerText.toLowerCase().replace(/[^a-z0-9 ]/g,""),t=X.find(e=>n.includes(e.toLowerCase()));if(!t)return;const i=e.closest(".public__message");if(!i)return;const o=i.querySelector(".cdate").innerText.trim(),s=i.querySelector(".username").innerText.trim(),a=i.querySelector(".cclear.logs_menu.sub_chat").getAttribute("data-user");console.log(`[${o}] removed: ${s} (${a}) - ${n} for "${t}"`),i.remove()})})})}),this.watcher.observe(window.$("#chat_logs_container")[0],{childList:!0,subtree:!0})}onDisable(){this.watcher&&this.watcher.disconnect()}}class R extends y{constructor(){super({name:"Disable Notifications",sect:"Settings",state:!0,type:"Toggle",tip:"Disable Notifications from the UI."})}onEnable(){C.enabled=!1,C.clear()}onDisable(){C.enabled=!0}}const I={saved:[],index:-1,focused:!1,input:window.$("#content"),listener:[]},O={saved:[],index:-1,focused:!1,input:window.$("#message_content"),listener:[]},z=e=>e.normalize("NFC").replace(/[\u200B-\u200D\uFEFF]/g,""),F=(e,n)=>{const t=new URLSearchParams(e);if(!t.has("content"))return;const i=t.get("content");for(let e=n.saved.length-1;e>=0;e--)z(n.saved[e])===z(i)&&n.saved.splice(e,1);n.saved.push(z(i)),n.saved.length>35&&(n.saved=n.saved.slice(-35)),w.update("chat_save",{main:I.saved,priv:O.saved})},N=e=>{const n=()=>{e.focused=!0,e.index=e.saved.length},t=()=>{e.focused=!1,e.index=e.saved.length},i=n=>{e.focused&&0!==e.saved.length&&("ArrowUp"===n.key?(n.preventDefault(),e.index--,e.index<0&&(e.index=e.saved.length-1),e.input.val(e.saved[e.index])):"ArrowDown"===n.key&&(n.preventDefault(),e.index++,e.index>=e.saved.length&&(e.index=0),e.input.val(e.saved[e.index])))};e.input.on("focus",n),e.input.on("blur",t),e.input.on("keydown",i),e.listener.push({event:"focus",func:n},{event:"blur",func:t},{event:"keydown",func:i})},j={init(){const e=w.get();e&&e.chat_save&&(I.saved=e.chat_save.main.slice(0,35),O.saved=e.chat_save.priv.slice(0,35)),x.xhrFuncs.push(function(e){const n=e[0];"string"==typeof n&&(this._main&&(console.log("main",this),F(n,I)),this._priv&&(console.log("priv",this),F(n,O)))}),N(I),N(O)},deinit(){[I,O].forEach(e=>{e.listener.forEach(({event:n,func:t})=>{e.input.off(n,t)}),e.listener=[],e.focused=!1,e.index=-1})}},q={sections:{},modules:{},listener:[],add(e){this.modules[e.name]=e,this.ui(e)},register(){this.add(new S),this.add(new L),this.add(new E),this.add(new A),this.add(new M),this.add(new B),this.add(new $),this.add(new D),this.add(new T),this.add(new R),j.init()},load(){const e=w.get();e&&e.modules&&Object.entries(e.modules).forEach(([e,n])=>{const t=this.modules[e];t&&(void 0!==n.state&&(t.state=n.state),n.config&&t.config&&Object.assign(t.config,n.config))})},save(e){const n={state:e.state};e.config&&Object.keys(e.config).length>0&&(n.config={...e.config});const t=(w.get()||{}).modules||{};t[e.name]=n,w.update("modules",t)},ui(e){let n=this.sections[e.sect];switch(n||(n=b.addSection(e.sect),this.sections[e.sect]=n),e.type){case"Toggle":e.ui=b.addToggle(n,e.name,e.tip,n=>{e.toggle(n),this.save(e)});break;case"Button":e.ui=b.addButton(n,e.name,e.tip,()=>{e.onActive()});break;case"Slider":const{min:t=0,max:i=100,value:o=50}=e.config;e.ui=b.addSlider(n,e.name,e.tip,t,i,o,n=>{e.config.value=n,e.onChange(n),this.save(e)});break;case"Box":e.ui=b.addBox(n,e.name,e.tip,n=>{e.onChange(n),this.save(e)});break;case"Label":e.ui=b.addLabel(section,e.name)}e.onInit(),e.bind&&(this.bind(e),"Button"===e.type&&e.ui.name(`${e.name} (${e.bind.toUpperCase()})`))},bind(e){const n=n=>{if(n.key.toLowerCase()===e.bind.toLowerCase()&&n.shiftKey)if(window.$("#message_content").blur(),window.$("#content").blur(),"Toggle"===e.type){const n=!e.state;e.toggle(n),e.ui?.set?.(n)}else"Button"===e.type&&e.onActive()};document.addEventListener("keydown",n),this.listener.push({event:"keydown",func:n})},init(){x.request(!0),this.register(),this.load(),b.addLabel(null,"Hold down shift to activate binds."),Object.values(this.modules).forEach(e=>{if(e.state)switch(e.onEnable(),e.type){case"Toggle":e.ui.set(!0);break;case"Slider":e.ui.set(e.config.value)}})},deinit(){j.deinit(),Object.values(this.modules).forEach(e=>{e.disable()}),document.removeEventListener(this.listener[0].event,this.listener[0].func),this.listener=[],x.request(!1)}};new class{constructor(){window.bca={},window.bca.artifacts=[],window.bca.events=[],this.init()}init(){b.init("Better Chate Avenue - femrawr"),C.init(),q.init(),b.onClose=()=>{window.bca.artifacts.forEach(e=>{e.remove()}),q.deinit()},C.good("Better Chat Avenue loaded!",5),C.info('Click the "Insert" key to toggle the UI',7)}}})();