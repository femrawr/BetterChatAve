(()=>{"use strict";var n={56:(n,e,t)=>{n.exports=function(n){var e=t.nc;e&&n.setAttribute("nonce",e)}},72:n=>{var e=[];function t(n){for(var t=-1,i=0;i<e.length;i++)if(e[i].identifier===n){t=i;break}return t}function i(n,i){for(var s={},a=[],r=0;r<n.length;r++){var c=n[r],d=i.base?c[0]+i.base:c[0],l=s[d]||0,u="".concat(d," ").concat(l);s[d]=l+1;var p=t(u),h={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)e[p].references++,e[p].updater(h);else{var g=o(h,i);i.byIndex=r,e.splice(r,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function o(n,e){var t=e.domAPI(e);t.update(n);return function(e){if(e){if(e.css===n.css&&e.media===n.media&&e.sourceMap===n.sourceMap&&e.supports===n.supports&&e.layer===n.layer)return;t.update(n=e)}else t.remove()}}n.exports=function(n,o){var s=i(n=n||[],o=o||{});return function(n){n=n||[];for(var a=0;a<s.length;a++){var r=t(s[a]);e[r].references--}for(var c=i(n,o),d=0;d<s.length;d++){var l=t(s[d]);0===e[l].references&&(e[l].updater(),e.splice(l,1))}s=c}}},105:(n,e,t)=>{t.d(e,{A:()=>r});var i=t(601),o=t.n(i),s=t(314),a=t.n(s)()(o());a.push([n.id,".gui-notif-ctnr {\n    position: fixed;\n    top: 20px;\n    right: 8px;\n    z-index: 1000000;\n    pointer-events: none;\n    max-width: 320px;\n}\n\n.gui-notif {\n    background: #1a1a1a;\n    border: 1px solid #333;\n    border-radius: 6px;\n    margin-bottom: 10px;\n    padding: 16px;\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);\n    transform: translateX(110%);\n    opacity: 0;\n    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    pointer-events: auto;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    min-width: 280px;\n}\n\n.gui-notif.show {\n    transform: translateX(0);\n    opacity: 1;\n}\n\n.gui-notif.hide {\n    transform: translateX(110%);\n    opacity: 0;\n}\n\n.gui-notif-cont {\n    display: flex;\n    align-items: flex-start;\n    gap: 12px;\n    flex: 1;\n}\n\n.gui-notif-icon {\n    font-size: 18px;\n    line-height: 1;\n    margin-top: 1px;\n    flex-shrink: 0;\n}\n\n.gui-notif-text {\n    color: #ccc;\n    font-size: 14px;\n    line-height: 1.4;\n    word-wrap: break-word;\n}\n\n.gui-notif-close {\n    color: #888;\n    cursor: pointer;\n    font-size: 18px;\n    line-height: 1;\n    margin-left: 12px;\n    flex-shrink: 0;\n    transition: color 0.2s ease;\n}\n\n.gui-notif-close:hover {\n    color: #ccc;\n}\n\n.gui-notif-good {\n    border-left: 4px solid #4CAF50;\n}\n\n.gui-notif-good .gui-notif-icon {\n    color: #4CAF50;\n}\n\n.gui-notif-error {\n    border-left: 4px solid #f44336;\n}\n\n.gui-notif-error .gui-notif-icon {\n    color: #f44336;\n}\n\n.gui-notif-warn {\n    border-left: 4px solid #ff9800;\n}\n\n.gui-notif-warn .gui-notif-icon {\n    color: #ff9800;\n}\n\n.gui-notif-info {\n    border-left: 4px solid #2196F3;\n}\n\n.gui-notif-info .gui-notif-icon {\n    color: #2196F3;\n}",""]);const r=a},113:n=>{n.exports=function(n,e){if(e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}},181:(n,e,t)=>{t.d(e,{A:()=>r});var i=t(601),o=t.n(i),s=t(314),a=t.n(s)()(o());a.push([n.id,".gui-main-ctnr {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    width: 460px;\n    background: #0d0d0d;\n    border: 1px solid #333;\n    border-radius: 6px;\n    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n    z-index: 999999;\n    user-select: none;\n    box-shadow: 0 6px 16px rgba(0, 0, 0, 0.9);\n}\n\n.gui-main-ctnr::-webkit-scrollbar {\n    display: none;\n}\n\n.gui-main-header {\n    background: #111;\n    color: #eee;\n    padding: 14px 18px;\n    cursor: default;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    font-size: 17px;\n    font-weight: bold;\n    border-bottom: 1px solid #333;\n}\n\n.gui-main-close {\n    color: #ff4444;\n    cursor: pointer;\n    font-size: 22px;\n    font-weight: lighter;\n    width: 22px;\n    height: 22px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    line-height: 1;\n}\n\n.gui-main-close:hover {\n    color: #ff6666;\n}\n\n.gui-main-cont {\n    padding: 18px;\n    max-height: calc(80vh - 52px);\n    overflow-y: auto;\n}\n\n.gui-main-cont::-webkit-scrollbar {\n    display: none;\n}\n\n.gui-main-sect {\n    margin-bottom: 18px;\n    border: 1px solid #2a2a2a;\n    border-radius: 5px;\n    background: #161616;\n}\n\n.gui-sect-head {\n    background: #1a1a1a;\n    padding: 10px 14px;\n    border-bottom: 1px solid #2a2a2a;\n    color: #ccc;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.gui-sect-toggle {\n    color: #888;\n    font-size: 12px;\n    transition: transform 0.2s ease;\n}\n\n.gui-main-sect.collapsed .gui-sect-toggle {\n    transform: rotate(-90deg);\n}\n\n.gui-sect-cont {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    gap: 12px;\n    padding: 12px;\n    transition: all 0.2s ease;\n}\n\n.gui-main-sect.collapsed .gui-sect-cont {\n    display: none;\n}\n\n.gui-item-main {\n    background: #1a1a1a;\n    border: 1px solid #2a2a2a;\n    border-radius: 4px;\n    padding: 12px;\n}\n\n.gui-item-label {\n    color: #ccc;\n    font-size: 14px;\n    margin-bottom: 8px;\n    font-weight: 600;\n}\n\n.gui-item-toggle {\n    position: relative;\n    width: 52px;\n    height: 26px;\n    background: #333;\n    border-radius: 13px;\n    cursor: pointer;\n    transition: background 0.2s ease;\n}\n\n.gui-item-toggle.active {\n    background: #ff4444;\n}\n\n.gui-item-toggle::after {\n    content: '';\n    position: absolute;\n    top: 3px;\n    left: 3px;\n    width: 20px;\n    height: 20px;\n    background: white;\n    border-radius: 50%;\n    transition: transform 0.2s ease;\n}\n\n.gui-item-toggle.active::after {\n    transform: translateX(26px);\n}\n\n.gui-item-button {\n    cursor: pointer;\n    text-align: center;\n    transition: all 0.2s ease;\n    background: #ff4444;\n    color: white;\n    font-weight: 600;\n}\n\n.gui-item-button:hover {\n    background: #ff6666;\n    transform: translateY(-1px);\n}\n\n.gui-item-button:active {\n    transform: translateY(0);\n}\n\n.gui-item-box, .gui-item-button {\n    width: 100%;\n    padding: 10px;\n    background: #222;\n    border: 1px solid #444;\n    border-radius: 4px;\n    color: #ccc;\n    font-size: 14px;\n    outline: none;\n    box-sizing: border-box;\n}\n\n.gui-item-box:focus {\n    border-color: #ff4444;\n}\n\n.gui-item-slider-ctnr {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 8px;\n}\n\n.gui-item-slider-box {\n    width: 60px;\n    padding: 4px 6px;\n    background: #222;\n    border: 1px solid #444;\n    border-radius: 3px;\n    color: #ff4444;\n    font-size: 14px;\n    text-align: center;\n    outline: none;\n}\n\n.gui-item-slider-box:focus {\n    border-color: #ff4444;\n}\n\n.gui-item-slider {\n    flex: 1;\n    height: 6px;\n    background: #333;\n    border-radius: 3px;\n    outline: none;\n    appearance: none;\n}\n\n.gui-item-slider::-webkit-slider-thumb {\n    -webkit-appearance: none;\n    width: 18px;\n    height: 18px;\n    background: #ff4444;\n    border-radius: 50%;\n    cursor: pointer;\n}\n\n.gui-item-slider::-moz-range-thumb {\n    width: 18px;\n    height: 18px;\n    background: #ff4444;\n    border-radius: 50%;\n    cursor: pointer;\n    border: none;\n}\n\n.gui-tip {\n    position: absolute;\n    background: rgba(0, 0, 0, 0.85);\n    color: #fff;\n    padding: 6px 8px;\n    border-radius: 4px;\n    font-size: 12px;\n    pointer-events: none;\n    opacity: 0;\n    transform: translateY(-4px);\n    transition: opacity 0.15s ease, transform 0.15s ease;\n    z-index: 1000000;\n    max-width: 240px;\n    white-space: normal;\n}\n\n.gui-tip.show {\n    opacity: 1;\n    transform: translateY(-8px);\n}\n\ninput[type=number]::-webkit-inner-spin-button,\ninput[type=number]::-webkit-outer-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}",""]);const r=a},314:n=>{n.exports=function(n){var e=[];return e.toString=function(){return this.map(function(e){var t="",i=void 0!==e[5];return e[4]&&(t+="@supports (".concat(e[4],") {")),e[2]&&(t+="@media ".concat(e[2]," {")),i&&(t+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),t+=n(e),i&&(t+="}"),e[2]&&(t+="}"),e[4]&&(t+="}"),t}).join("")},e.i=function(n,t,i,o,s){"string"==typeof n&&(n=[[null,n,void 0]]);var a={};if(i)for(var r=0;r<this.length;r++){var c=this[r][0];null!=c&&(a[c]=!0)}for(var d=0;d<n.length;d++){var l=[].concat(n[d]);i&&a[l[0]]||(void 0!==s&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=s),t&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=t):l[2]=t),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),e.push(l))}},e}},540:n=>{n.exports=function(n){var e=document.createElement("style");return n.setAttributes(e,n.attributes),n.insert(e,n.options),e}},601:n=>{n.exports=function(n){return n[1]}},659:n=>{var e={};n.exports=function(n,t){var i=function(n){if(void 0===e[n]){var t=document.querySelector(n);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(n){t=null}e[n]=t}return e[n]}(n);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}},825:n=>{n.exports=function(n){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=n.insertStyleElement(n);return{update:function(t){!function(n,e,t){var i="";t.supports&&(i+="@supports (".concat(t.supports,") {")),t.media&&(i+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(i+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),i+=t.css,o&&(i+="}"),t.media&&(i+="}"),t.supports&&(i+="}");var s=t.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,n,e.options)}(e,n,t)},remove:function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)}}}}},e={};function t(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={id:i,exports:{}};return n[i](s,s.exports,t),s.exports}t.n=n=>{var e=n&&n.__esModule?()=>n.default:()=>n;return t.d(e,{a:e}),e},t.d=(n,e)=>{for(var i in e)t.o(e,i)&&!t.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:e[i]})},t.o=(n,e)=>Object.prototype.hasOwnProperty.call(n,e),t.nc=void 0;var i=t(72),o=t.n(i),s=t(825),a=t.n(s),r=t(659),c=t.n(r),d=t(56),l=t.n(d),u=t(540),p=t.n(u),h=t(113),g=t.n(h),f=t(181),m={};m.styleTagTransform=g(),m.setAttributes=l(),m.insert=c().bind(null,"head"),m.domAPI=a(),m.insertStyleElement=p();o()(f.A,m);f.A&&f.A.locals&&f.A.locals;const v={gui(n,e,t){const i=document.createElement(n);return t&&(i.textContent=t),e&&(Array.isArray(e)?i.className=e.map(n=>"gui-"+n).join(" "):i.className="gui-"+e),i}},b={_container:null,_main:null,_active:null,onClose:null,init(n){this._container=v.gui("div","main-ctnr");const e=v.gui("div","main-header"),t=v.gui("span","main-title",n),i=v.gui("div","main-close","X");i.onclick=()=>this._close(),e.appendChild(t),e.appendChild(i),this._main=v.gui("div","main-cont"),this._container.appendChild(e),this._container.appendChild(this._main),window.bca.artifacts.push(this._container),document.body.appendChild(this._container),this._dragify(e),document.addEventListener("keydown",n=>{"Insert"===n.code&&this._toggle()})},_dragify(n){let e=!1,t={X:0,Y:0},i={X:0,Y:0},o={X:0,Y:0};n.addEventListener("mousedown",t=>{if(t.target!==n&&!t.target.closest(".gui-main-header"))return;const o=window.getComputedStyle(this._container).transform,s="none"===o?new DOMMatrix:new DOMMatrix(o);i.X=t.clientX-s.m41,i.Y=t.clientY-s.m42,e=!0}),document.addEventListener("mouseup",()=>{e=!1}),document.addEventListener("mousemove",n=>{e&&(n.preventDefault(),t.X=n.clientX-i.X,t.Y=n.clientY-i.Y,o.X=t.X,o.Y=t.Y,this._container.style.transform=`translate(${t.X}px, ${t.Y}px)`)})},_close(){this.onClose(),this._container.remove()},_toggle(){const n="none"===this._container.style.display;this._container.style.display=n?"":"none"},_tip(n,e){const t=v.gui("div","tip",e);window.bca.artifacts.push(t),document.body.appendChild(t),n.addEventListener("mouseenter",n=>{t.classList.add("show"),t.style.left=`${n.pageX+12}px`,t.style.top=n.pageY-8+"px"}),n.addEventListener("mousemove",n=>{t.style.left=`${n.pageX+12}px`,t.style.top=n.pageY-8+"px"}),n.addEventListener("mouseleave",()=>{t.classList.remove("show")})},addSection(n){const e=v.gui("div","main-sect"),t=v.gui("div","sect-head"),i=v.gui("span","sect-title",n),o=v.gui("span","sect-toggle","▼");t.addEventListener("click",()=>{e.classList.toggle("collapsed")}),t.appendChild(i),t.appendChild(o);const s=v.gui("div","sect-cont");return e.appendChild(t),e.appendChild(s),this._main.appendChild(e),this._active=s,{element:e,content:s,set:()=>(this._active=s,this)}},addLabel(n,e){const t=v.gui("div","item-main"),i=v.gui("div","item-label",e);t.appendChild(i);return(n?n.content:this._main).appendChild(t),t},addToggle(n,e,t,i){const o=v.gui("div","item-main"),s=v.gui("div","item-label",e),a=v.gui("div","item-toggle");t&&this._tip(o,t);let r=!1;a.addEventListener("click",()=>{r=!r,a.classList.toggle("active",r),i&&i(r)}),o.appendChild(s),o.appendChild(a);return(n?n.content:this._active).appendChild(o),{get:()=>r,set:n=>{r=n,a.classList.toggle("active",r)}}},addButton(n,e,t,i){const o=v.gui("div","item-main"),s=v.gui("button","item-button",e);t&&this._tip(o,t),s.addEventListener("click",()=>{i&&i()}),o.appendChild(s);return(n?n.content:this._active).appendChild(o),{name:n=>s.textContent=n,set:n=>s.disabled=!n}},addBox(n,e,t,i){const o=v.gui("div","item-main"),s=v.gui("div","item-label",e);t&&this._tip(o,t);const a=v.gui("input","item-box");a.type="text",a.addEventListener("keydown",n=>{"Enter"===n.key&&a.blur()}),i&&a.addEventListener("input",n=>i(n.target.value)),o.appendChild(s),o.appendChild(a);return(n?n.content:this._active).appendChild(o),{get:()=>a.value,set:n=>a.value=n}},addSlider(n,e,t,i,o,s,a){const r=v.gui("div","item-main"),c=v.gui("div","item-slider-ctnr");t&&this._tip(r,t);const d=v.gui("div","item-label",e);d.style.marginBottom="0";const l=v.gui("input","item-slider-box");l.type="number",l.value=s,l.addEventListener("keydown",n=>{"Enter"===n.key&&l.blur()}),c.appendChild(d),c.appendChild(l);const u=v.gui("input","item-slider");u.type="range",u.min=i,u.max=o,u.value=s;const p=n=>{u.value=n,l.value=n,a&&a(Number(n))};u.addEventListener("input",n=>p(n.target.value)),l.addEventListener("input",n=>p(n.target.value)),r.appendChild(c),r.appendChild(u);return(n?n.content:this._active).appendChild(r),{get:()=>Number(u.value),set:n=>p(n)}}},x={_hooked:{},xhrFuncs:[],notifs(n){if(n)return this._hooked.callSuccess=window.callSuccess,void(window.callSuccess=()=>{});this._hooked.callSuccess&&(window.callSuccess=this._hooked.callSuccess,delete this._hooked.callSuccess)},closeRight(){let n=window.closeRight;window.closeRight=()=>{window.prepareRight(0),window.userReload(1),window.closeRight=n,n=null}},request(){const n=this,e=XMLHttpRequest.prototype.open,t=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.open=function(...n){return this._main=n[1].includes("chat_process.php"),this._hook=/(?:chat|private)_process\.php/.test(n[1]),e.apply(this,n)},XMLHttpRequest.prototype.send=function(...e){if(!this._hook)return t.apply(this,e);for(const t of n.xhrFuncs)t.call(this,e);return t.apply(this,e)}}},w={save:{},get(){const n=localStorage.getItem("bca");return JSON.parse(n)||null},set(){localStorage.setItem("bca",JSON.stringify(this.save))},update(n,e){const t=this.get()||{};t[n]=e,this.save=t,this.set()}};var y=t(105),_={};_.styleTagTransform=g(),_.setAttributes=l(),_.insert=c().bind(null,"head"),_.domAPI=a(),_.insertStyleElement=p();o()(y.A,_);y.A&&y.A.locals&&y.A.locals;const k={_container:{},_count:0,_active:new Map,enabled:!0,init(){this._container=v.gui("div","notif-ctnr"),window.bca.artifacts.push(this._container),document.body.appendChild(this._container)},_show(n,e,t){if(!this.enabled)return;const i=v.gui("div",["notif","notif-"+t]),o=v.gui("div","notif-cont"),s=this._icon(t),a=v.gui("div","notif-icon",s),r=v.gui("div","notif-text",n),c=v.gui("div","notif-close","X");c.onclick=()=>this._hide(d),o.appendChild(a),o.appendChild(r),i.appendChild(o),i.appendChild(c);const d=this._count+=1;return this._container.appendChild(i),this._active.set(d,i),setTimeout(()=>i.classList.add("show"),10),setTimeout(()=>this._hide(d),1e3*e),d},_hide(n){const e=this._active.get(n);e&&(e.classList.add("hide"),setTimeout(()=>{e.parentNode&&e.parentNode.removeChild(e),this._active.delete(n)},300))},_icon(n){const e={good:"✓",error:"✕",warn:"⚠",info:"ⓘ"};return e[n]||e.info},clear(){this._active.forEach((n,e)=>this._hide(e))},info(n,e){return this._show(n,e,"info")},warn(n,e){return this._show(n,e,"warn")},error(n,e){return this._show(n,e,"error")},good(n,e){return this._show(n,e,"good")}};class C{constructor(n={}){const{name:e="Name",sect:t=null,state:i=!1,type:o="",bind:s="",tip:a="",config:r={}}=n;this.name=e,this.sect=t,this.state=i,this.type=o,this.bind=s,this.tip=a,this.config=r,this.ui=null}onInit(){}onEnable(){}onDisable(){}onActive(){}onChange(){}enable(){this.state=!0,this.onEnable()}disable(){this.state=!1,this.onDisable()}toggle(n){void 0===n&&(n=!this.state),n?this.enable():this.disable()}setValue(n){this.ui?.set?.(n)}getValue(){return this.ui?.get?.()??null}}class L extends C{constructor(){super({name:"Clear DMs",sect:"Convenience",type:"Button",tip:"Clears all your DMs."})}onActive(){window.privateClear(),k.good("DMs cleared",3)}}class S extends C{constructor(){super({name:"Fast Block",sect:"Convenience",type:"Button",bind:"B",tip:"Quickly blocks the person you are talking to."})}onActive(){if(0===window.currentPrivate)return;window.ignoreThisUser();const n=window.$("#private_close")[0];n&&(n.click(),k.good("User has been blocked.",3))}}class E extends C{constructor(){super({name:"Swap DMs",sect:"Convenience",type:"Button",bind:"L",tip:"Quickly switch to the next person in your DMs."})}onActive(){window.hideMenu("private_menu"),window.$.post("system/float/private_notify.php",{},n=>{window.appendMenu("private_menu",n);const e=window.$(".priv_mess")[0];if(!e)return;const t=e.querySelector(".fmenu_name.gprivate");t&&(t.click(),window.$("#message_content")[0]?.focus())}),k.info("Swapping DMs...",3)}}class A extends C{constructor(){super({name:"Country Search",sect:"Miscellaneous",type:"Button",tip:"Search for people based on thier country code."})}onActive(){const n=prompt('Country code to search, example: "sg" for Singapore.');n&&(window.prepareRight(0),window.$.post("system/panel/user_list.php",{},function(e){window.$("#chat_right_data").html(e),window.firstPanel="",document.querySelectorAll("#chat_right_data .user_item").forEach(e=>{e.getAttribute("data-country")!==n.toUpperCase()&&e.remove()}),x.closeRight()}))}}class M extends C{constructor(){super({name:"Disable Success",sect:"Miscellaneous",state:!0,type:"Toggle",tip:"Disables the success banner that appears at the top of your screen."})}onEnable(){x.notifs(!0)}onDisable(){x.notifs(!1)}}class T extends C{constructor(){super({name:"Filter Bypass",sect:"Miscellaneous",state:!0,type:"Toggle",tip:"Bypasses the chat filter."})}onInit(){const n=this;x.xhrFuncs.push(function(e){const t=e[0];if(!this._hook||"string"!=typeof t||!n.state)return;const i=new URLSearchParams(t);if(i.has("content")){const n=i.get("content").split("").join("‍");i.set("content",n),e[0]=i.toString()}})}}class X extends C{constructor(){super({name:"Disable Notifications",sect:"Settings",state:!0,type:"Toggle",tip:"Disable Notifications from the UI."})}onEnable(){k.enabled=!1,k.clear()}onDisable(){k.enabled=!0}}let D=[],B=-1,I=!1;const z=window.$("#content"),Y=()=>{const n=w.get();n&&n.chat_save&&(D=n.chat_save),x.xhrFuncs.push(function(n){const e=n[0];if(!this._main||"string"!=typeof e)return;const t=new URLSearchParams(e);if(!t.has("content"))return;const i=t.get("content");for(let n=D.length-1;n>=0;n--)D[n]===i&&D.splice(n,1);D.push(i),w.update("chat_save",D)}),z.on("focus",()=>{I=!0,B=D.length}),z.on("blur",()=>{I=!1,B=D.length}),z.on("keydown",n=>{I&&0!==D.length&&("ArrowUp"==n.key?(n.preventDefault(),B--,B<0&&(B=D.length-1),z.val(D[B])):"ArrowDown"===n.key&&(n.preventDefault(),B++,B>=D.length&&(B=0),z.val(D[B])))})},R={sections:{},modules:{},add(n){this.modules[n.name]=n,this.ui(n)},register(){this.add(new L),this.add(new E),this.add(new S),this.add(new T),this.add(new M),this.add(new A),this.add(new X),Y()},load(){const n=w.get();n&&n.modules&&Object.entries(n.modules).forEach(([n,e])=>{const t=this.modules[n];t&&(void 0!==e.state&&(t.state=e.state),e.config&&t.config&&Object.assign(t.config,e.config),void 0!==e.value&&void 0!==t.value&&(t.value=e.value))})},save(n){const e={state:n.state};n.config&&Object.keys(n.config).length>0&&(e.config={...n.config}),void 0!==n.value&&(e.value=n.value);const t=(w.get()||{}).modules||{};t[n.name]=e,w.update("modules",t)},ui(n){let e=this.sections[n.sect];switch(e||(e=b.addSection(n.sect),this.sections[n.sect]=e),n.type){case"Toggle":n.ui=b.addToggle(e,n.name,n.tip,e=>{n.toggle(e),this.save(n)});break;case"Button":n.ui=b.addButton(e,n.name,n.tip,()=>{n.onActive()});break;case"Slider":const{min:t=0,max:i=100,value:o=50}=n.config;n.ui=b.addSlider(e,n.name,n.tip,t,i,o,e=>{n.onChange(e),this.save(n)});break;case"Box":n.ui=b.addBox(e,n.name,n.tip,e=>{n.onChange(e),this.save(n)});break;case"Label":n.ui=b.addLabel(section,n.name)}n.onInit(),n.bind&&(this.bind(n),"Button"===n.type&&n.ui.name(`${n.name} (${n.bind.toUpperCase()})`))},bind(n){document.addEventListener("keydown",e=>{if(e.key.toLowerCase()===n.bind.toLowerCase()&&e.shiftKey)if(window.$("#message_content")[0]?.blur(),window.$("#main_input")[0]?.blur(),"Toggle"===n.type){const e=!n.state;n.toggle(e),n.ui?.set?.(e)}else"Button"===n.type&&n.onActive()})},init(){x.request(),this.register(),this.load(),b.addLabel(null,"Hold down shift to activate binds."),Object.values(this.modules).forEach(n=>{n.state&&(n.onEnable(),"Toggle"===n.type&&n.ui.set(!0))})}};new class{constructor(){window.bca={},window.bca.artifacts=[],window.bca.events=[],this.init()}init(){b.init("Better Chate Avenue - femrawr"),k.init(),R.init(),b.onClose=()=>{window.bca.artifacts.forEach(n=>{n.remove()})},k.good("Better Chat Avenue loaded!",5),k.info('Click the "Insert" key to toggle the UI',7)}}})();